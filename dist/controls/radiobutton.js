"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.RadioButtonStyle=exports.radioButtonClassName=void 0;const react_1=__importStar(require("react")),controller_1=require("../hooks/controller"),prop_1=__importDefault(require("../hooks/prop")),value_1=__importDefault(require("../hooks/value")),input_1=__importStar(require("../layouts/input")),style_1=__importStar(require("../layouts/style")),classname_utils_1=__importDefault(require("../utils/classname-utils")),dom_utils_1=require("../utils/dom-utils");exports.radioButtonClassName="bh-rbt";const RadioButton=e=>{const t=(0,react_1.useRef)(),a=(0,prop_1.default)(e.labelDataName??"label"),r=(0,prop_1.default)(e.valueDataName??"value"),n=(0,prop_1.default)(e.titleDataName??"title"),o=(0,react_1.useRef)([]),[s,l]=(0,react_1.useState)(!0),{value:i,getValue:u,setValue:d}=(0,value_1.default)(e,{nullValue:o.current[0]?.[r.current],convertChangedArgData:e=>({value:e,data:o.current.find((t=>t[r.current]===e))})}),c=t=>{!0===e.disabled||s||d(t)},p=(0,react_1.useMemo)((()=>{const t=[];if(s)return t;for(const s of o.current){const o=s[r.current];t.push(react_1.default.createElement("div",{key:o,className:`${exports.radioButtonClassName}-item`,"data-selected":o===i,onClick:()=>c(o),onKeyDown:e=>{(0,dom_utils_1.pressPositiveKey)(e,(()=>c(o)),!0)},tabIndex:!0===e.disabled?null:0,title:s[n.current]},react_1.default.createElement("div",{className:`${exports.radioButtonClassName}-mark`,"data-selected":o===i}),react_1.default.createElement("div",{className:input_1.InputClassNames.lbl},s[a.current])))}return t}),[o.current,i,e.disabled,s]);return(0,controller_1.initController)(e.controller,(e=>{e.focus=()=>(t.current.querySelector("div")?.focus(),e),e.blur=()=>(t.current.querySelector("div")?.blur(),e),e.getValue=()=>u(),e.setValue=t=>(c(t),e)})),(0,react_1.useEffect)((()=>{l(!0);const t=e=>{o.current=e;const t=u();let a=!0;for(const e of o.current){if(e[r.current]===t){d(t),a=!1;break}}a&&o.current.length>0&&d(o.current[0][r.current]),l(!1)};if(null==e.source)t([]);else if(Array.isArray(e.source))t(e.source);else{(async()=>{try{t(await e.source())}catch{console.log("failed: load radiobutton source"),t([])}})()}}),[e.source]),react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{ref:t,style:e.style,className:classname_utils_1.default.join(exports.radioButtonClassName,e.className),"data-disabled":!0===e.disabled,"data-required":e.required,"data-dirc":e.direction??"horizontal","data-wrap":!0===e.wrap,title:e.title,onFocus:a=>{a.relatedTarget?.parentElement!==t.current&&e.focus?.(u())},onBlur:a=>{a.relatedTarget?.parentElement!==t.current&&e.blur?.(u())}},p),input_1.default,exports.RadioButtonStyle)};exports.default=RadioButton,exports.RadioButtonStyle=react_1.default.createElement(style_1.default,{id:exports.radioButtonClassName,notDepsColor:!0,css:({design:e})=>`\n.${exports.radioButtonClassName} {\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n.${exports.radioButtonClassName}[data-dirc="horizontal"] {\n  flex-direction: row;\n}\n.${exports.radioButtonClassName}[data-dirc="vertical"] {\n  flex-direction: column;\n}\n.${exports.radioButtonClassName}[data-wrap="true"] {\n  flex-wrap: wrap;\n}\n.${exports.radioButtonClassName}[data-wrap="false"] {\n  flex-wrap: nowrap;\n}\n.${exports.radioButtonClassName}-item {\n  box-sizing: border-box;\n  position: relative;\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: flex-start;\n  align-items: center;\n  flex: none;\n  padding: 2px;\n  height: ${style_1.CssVar.size};\n}\n.${exports.radioButtonClassName}[data-disabled="false"] .${exports.radioButtonClassName}-item {\n  cursor: pointer;\n  user-select: none;\n}\n.${exports.radioButtonClassName}[data-dirc="horizontal"] .${exports.radioButtonClassName}-item:not(:last-child) {\n  margin-right: 0px;\n}\n.${exports.radioButtonClassName}-mark {\n  box-sizing: border-box;\n  position: relative;\n  height: ${style_1.CssVar.size};\n  width: ${style_1.CssVar.size};\n}\n.${exports.radioButtonClassName}-mark::before,\n.${exports.radioButtonClassName}-mark::after {\n  box-sizing: border-box;\n  position: absolute;\n  content: "";\n  border-radius: 50%;\n}\n.${exports.radioButtonClassName}-mark::before {\n  height: 60%;\n  width: 60%;\n  top: 20%;\n  left: 20%;\n}\n.${exports.radioButtonClassName}-mark::after {\n  height: 36%;\n  width: 36%;\n  top: 32%;\n  left: 32%;\n}\n.${exports.radioButtonClassName}[data-disabled="true"] .${exports.radioButtonClassName}-mark::before {\n  opacity: 0.6;\n}\n.${exports.radioButtonClassName} .${input_1.InputClassNames.lbl} {\n  padding-left: 1px;\n}\n${"material"===e?`\n.${exports.radioButtonClassName}-mark::before {\n  border: 1px solid ${style_1.CssVar.bdc};\n}\n.${exports.radioButtonClassName}-mark[data-selected="true"]::after {\n  background: ${style_1.CssVar.bg.c_r};\n}\n.${exports.radioButtonClassName}[data-disabled="true"] .${exports.radioButtonClassName}-mark::before {\n  opacity: 0.3;\n}\n`:""}\n${"neumorphism"===e?`\n.${exports.radioButtonClassName}-mark::before {\n  box-shadow: ${style_1.CssParam.n.ccvSd};\n  background: ${style_1.CssParam.n.ccvBg};\n}\n.${exports.radioButtonClassName}-mark[data-selected="true"]::after {\n  box-shadow: ${style_1.CssParam.n.border.cvxSd_r};\n  background: ${style_1.CssParam.n.cvxBg_r};\n}\n.${exports.radioButtonClassName}[data-disabled="true"] .${exports.radioButtonClassName}-mark::before {\n  box-shadow: ${style_1.CssParam.n.border.ccvSd};\n}\n`:""}\n`});