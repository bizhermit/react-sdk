"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,l,a){void 0===a&&(a=l),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[l]}})}:function(e,t,l,a){void 0===a&&(a=l),e[a]=t[l]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var l in e)"default"!==l&&Object.prototype.hasOwnProperty.call(e,l)&&__createBinding(t,e,l);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ListViewSliderColumnStyle=exports.listViewSliderColumnClassName=void 0;const react_1=__importStar(require("react")),react_dom_1=__importDefault(require("react-dom")),controller_1=__importDefault(require("../../hooks/controller")),input_column_1=require("../../layouts/input-column"),style_1=__importStar(require("../../layouts/style")),classname_utils_1=__importDefault(require("../../utils/classname-utils")),dom_utils_1=require("../../utils/dom-utils"),listview_1=require("../listview"),slider_1=__importDefault(require("../slider"));exports.listViewSliderColumnClassName="bh-lv_c-sld";const ListViewSliderColumn=e=>{const t=e.labelDataName??(null==e.format?e.name:`_lbl_${e.name}`);let l={value:null};return{...e,name:t,dataType:"number",initialize:()=>{const t=document.createElement("div");t.classList.add(`${listview_1.listViewClassName}-lbl`);const l=document.createElement("div");return l.classList.add(`${exports.listViewSliderColumnClassName}-bar`,classname_utils_1.default.hAlign(e.progressAlign)),{lblElem:t,barElem:l}},cellInitialize:(e,t)=>{e.element.classList.add(input_column_1.listViewInputColumnClassName,exports.listViewSliderColumnClassName);const l=(0,dom_utils_1.cloneElement)(t.barElem);e.contentElements.push(l),e.element.appendChild(l);const a=(0,dom_utils_1.cloneElement)(t.lblElem);e.element.appendChild(a),e.contentElements.push(a)},bindedItems:l=>{!1!==e.labelDisplay&&e.format&&l.forEach((l=>l[t]=e.format(l[e.name])))},cellRender:({cache:l,row:a,contentElements:i})=>{if(l.val!==a.item.data[e.name]){const n=a.item.data[e.name];!1!==e.labelDisplay&&(i[1].textContent=a.item.data[t]),e.progressbarRender?.(n,i[0]),i[0].style.width=`${Math.min(100,Math.max(0,l.val=n))}%`}},_beginEdit:({target:t,editElement:a,styleCtx:i})=>{!0!==e.disabled&&react_dom_1.default.render(react_1.default.createElement(style_1.StyleContext.Provider,{value:i},react_1.default.createElement(SliderColumn,{bind:l={value:t.data[e.name]},options:e.sliderOptions})),a,(()=>{e.beganEdit?.(t.data[e.name],t)}))},_endEdit:(a,i,n)=>{const r=a.data[e.name],s=l.value;i&&(a.data[e.name]=s,a.data[t]=e.format?e.format(s):s),react_dom_1.default.unmountComponentAtNode(n),e.endedEdit?.({before:r,after:i?s:r},a,i)},jsxStyle:exports.ListViewSliderColumnStyle}};exports.default=ListViewSliderColumn;const SliderColumn=({bind:e,options:t})=>{const l=(0,controller_1.default)();return(0,react_1.useEffect)((()=>{l.focus()}),[]),react_1.default.createElement(slider_1.default,{controller:l,name:"value",bind:e,style:{height:"100%",width:"100%"},...t})};exports.ListViewSliderColumnStyle=react_1.default.createElement(style_1.default,{id:exports.listViewSliderColumnClassName,notDepsColor:!0,css:({design:e})=>`\n.${exports.listViewSliderColumnClassName}-bar {\n  box-sizing: border-box;\n  position: absolute;\n  height: 60%;\n  top: 20%;\n  max-width: 100%;\n  z-index: -1;\n}\n.${exports.listViewSliderColumnClassName}-bar.bh-h-l {\n  left: 0px;\n}\n.${exports.listViewSliderColumnClassName}-bar.bh-h-r {\n  right: 0px;\n}\n${"material"===e?`\n.${exports.listViewSliderColumnClassName}-bar {\n  background: ${style_1.CssVar.slider.bar_c};\n}\n`:""}\n${"neumorphism"===e?`\n.${exports.listViewSliderColumnClassName}-bar {\n  background: linear-gradient(to bottom right, ${style_1.CssVar.slider.bar_dc}, ${style_1.CssVar.slider.bar_bc});\n  box-shadow: ${style_1.CssParam.n.border.cvxSd};\n}\n`:""}\n`});