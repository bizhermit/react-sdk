"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&__createBinding(t,e,a);return __setModuleDefault(t,e),t},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GradualContainerStyle=exports.gradualContainerClassName=void 0;const react_1=__importStar(require("react")),prop_1=__importDefault(require("../hooks/prop")),style_1=__importStar(require("../layouts/style")),classname_utils_1=__importStar(require("../utils/classname-utils"));exports.gradualContainerClassName="bh-gdl_ctr";const GradualContainer=e=>{const[t,a]=(0,react_1.useState)(0),[n,r]=(0,react_1.useState)(e.contents.map((()=>null))),s=(0,prop_1.default)(e.direction??"horizontal"),l=(0,react_1.useMemo)((()=>{const l=[];for(let o=0;o<t+1;o++){const i=e.contents[o];if(null==i)break;const c={flex:i.flexRate};"horizontal"===s.current?c.minWidth=i.minSize:c.minHeight=i.minSize;const u={showNext:(s,l)=>{if(a(Math.max(t,Math.min(e.contents.length-1,o+1))),n[o+1]!==s||l){const e=n.map((e=>e));e[o+1]=s,r(e)}},closeNexts:()=>{a(o)},close:()=>{a(Math.max(0,o-1))},setNextProps:(e,t)=>{if(n[o+1]!==e||t){const t=n.map((e=>e));t[o+1]=e,r(t)}}};l.push(react_1.default.createElement(GradualContainerContent,{key:o,style:c,step:o,gcc:u,content:i,componentProps:n[o]}))}return l}),[t,n,s.current]);return react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement("div",{className:(0,classname_utils_1.className)(exports.gradualContainerClassName,classname_utils_1.default.fitToOuter(e.fitToOuter),e.className),style:e.style},react_1.default.createElement("div",{className:`${exports.gradualContainerClassName}-contents ${style_1.scrollbarClassName} ${classname_utils_1.default.direction(s.current)}`},l),react_1.default.createElement("div",{className:`${exports.gradualContainerClassName}-mask`})),exports.GradualContainerStyle)};exports.default=GradualContainer;const GradualContainerContent=({style:e,gcc:t,content:a,componentProps:n})=>{const r=(0,react_1.useRef)();return react_1.default.createElement("div",{key:a.key,className:`${exports.gradualContainerClassName}-content-wrap`,style:e},react_1.default.createElement("div",{className:`${exports.gradualContainerClassName}-content ${style_1.scrollbarClassName}`},react_1.default.createElement(a.component,{...a.props,...n,gcc:t,ma:{_fetchMask:()=>r.current}})),react_1.default.createElement("div",{ref:r,className:`${exports.gradualContainerClassName}-mask`}))};exports.GradualContainerStyle=react_1.default.createElement(style_1.default,{id:exports.gradualContainerClassName,css:()=>`\n.${exports.gradualContainerClassName} {\n  box-sizing: border-box;\n  position: relative;\n  display: block;\n  flex: none;\n  overflow: hidden;\n}\n${style_1.CssPV.fitToOuter(exports.gradualContainerClassName)}\n.${exports.gradualContainerClassName}-contents {\n  ${style_1.CssPV.flex}\n  flex-wrap: nowrap;\n  justify-content: flex-start;\n  align-items: flex-start;\n  ${style_1.CssPV.fill}\n}\n.${exports.gradualContainerClassName}-contents.bh-h {\n  flex-direction: row;\n}\n.${exports.gradualContainerClassName}-contents.bh-v {\n  flex-direction: column;\n}\n.${exports.gradualContainerClassName}-content-wrap {\n  box-sizing: border-box;\n  position: relative;\n  display: block;\n  flex: 1;\n}\n.${exports.gradualContainerClassName}-contents.bh-h > .${exports.gradualContainerClassName}-content-wrap {\n  height: 100%;\n  min-width: 0px;\n}\n.${exports.gradualContainerClassName}-contents.bh-v > .${exports.gradualContainerClassName}-content-wrap {\n  width: 100%;\n  min-height: 0px;\n}\n.${exports.gradualContainerClassName}-content {\n  ${style_1.CssPV.flex_c}\n  ${style_1.CssPV.fill}\n}\n.${exports.gradualContainerClassName}-contents,\n.${exports.gradualContainerClassName}-content {\n  z-index: 0;\n}\n.${exports.gradualContainerClassName}-mask {\n  z-index: 1;\n}\n`});